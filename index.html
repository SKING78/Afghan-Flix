<!DOCTYPE html>
<html lang="ps" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Afghan Flix</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4a148c;  /* بنفش رنګ */
            --secondary-color: #7b1fa2;
            --accent-color: #e91e63;   /* ګلابي رنګ */
            --danger-color: #f44336;
            --dark-color: #1a237e;    /* تور نیلي */
            --light-color: #f3e5f5;    /* روڼ بنفش */
            --text-color: #212121;
            --text-light: #757575;
            --white: #ffffff;
            --shadow: 0 2px 5px rgba(0,0,0,0.1);
            --gradient: linear-gradient(135deg, #4a148c 0%, #e91e63 100%);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        /* نويټیشن بار */
        .nav-container {
            background: var(--gradient);
            color: var(--white);
            padding: 15px;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 100;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-weight: bold;
            font-size: 20px;
            font-family: 'Arial', sans-serif;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        
        .nav-icons {
            display: flex;
            gap: 15px;
        }
        
        .nav-icons i {
            font-size: 20px;
            cursor: pointer;
        }
        
        /* اصلی کونټینر */
        .main-container {
            margin-top: 60px;
            padding-bottom: 60px;
        }
        
        /* ویډیو پلیئر */
        .video-container {
            position: relative;
            width: 100%;
            background-color: #000;
        }
        
        .video-player {
            width: 100%;
            display: block;
        }
        
        /* ویډیو کنټرولونه */
        .video-controls {
            background-color: var(--white);
            padding: 10px 15px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid #eee;
        }
        
        .control-btn {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 14px;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 5px;
            min-width: 60px;
        }
        
        .control-btn i {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        .control-btn.active {
            color: var(--accent-color);
        }
        
        /* ویډیو معلومات */
        .video-info {
            padding: 15px;
            background-color: var(--white);
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }
        
        .video-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--dark-color);
        }
        
        .video-meta {
            display: flex;
            justify-content: space-between;
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .video-desc {
            font-size: 14px;
            color: var(--text-color);
        }
        
        /* کیفیت انتخاب */
        .quality-selector {
            padding: 10px 15px;
            background-color: var(--white);
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }
        
        select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: var(--light-color);
        }
        
        /* اړونده ویډیوګانې */
        .related-videos {
            padding: 15px;
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 15px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--dark-color);
        }
        
        .video-item {
            display: flex;
            margin-bottom: 15px;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .video-item:hover {
            background-color: var(--light-color);
        }
        
        .video-thumb {
            width: 120px;
            height: 70px;
            background-color: #eee;
            margin-left: 10px;
            flex-shrink: 0;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }
        
        .video-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-thumb .duration {
            position: absolute;
            bottom: 5px;
            left: 5px;
            background-color: rgba(0,0,0,0.7);
            color: white;
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 12px;
        }
        
        .video-item-info {
            flex-grow: 1;
        }
        
        .video-item-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            color: var(--dark-color);
        }
        
        .video-item-meta {
            font-size: 12px;
            color: var(--text-light);
        }
        
        /* تب بار */
        .tab-bar {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: var(--white);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
            z-index: 100;
        }
        
        .tab-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-light);
            text-decoration: none;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .tab-btn i {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        .tab-btn.active {
            color: var(--primary-color);
            transform: translateY(-5px);
        }
        
        /* آفلاین حالت */
        .offline-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--danger-color);
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            z-index: 10;
        }
        
        /* لودر */
        .loader {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .loader-content {
            background-color: var(--white);
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            box-shadow: var(--shadow);
        }
        
        /* د پاڼو سټایل */
        .page {
            display: none;
            padding: 15px;
        }
        
        .page.active {
            display: block;
        }
        
        /* اپلوډ فورم */
        .upload-form {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-top: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--dark-color);
        }
        
        .form-group input, 
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: var(--light-color);
        }
        
        .upload-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
        }
        
        /* د ننوتلو فورم */
        .auth-form {
            max-width: 400px;
            margin: 30px auto;
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }
        
        .auth-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--dark-color);
        }
        
        .auth-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            margin-top: 10px;
        }
        
        .auth-link {
            text-align: center;
            margin-top: 15px;
            color: var(--primary-color);
        }
    </style>
</head>
<body>
    <!-- نويټیشن بار -->
    <div class="nav-container">
        <div class="logo">Afghan Flix</div>
        <div class="nav-icons">
            <i class="fas fa-search" onclick="showSearch()"></i>
            <i class="fas fa-user-circle" onclick="showPage('profile-page')"></i>
            <i class="fas fa-upload" onclick="showPage('upload-page')"></i>
        </div>
    </div>
    
    <!-- اصلی کونټینر -->
    <div class="main-container">
        <!-- کور پاڼه -->
        <div class="page active" id="home-page">
            <!-- ویډیو پلیئر -->
            <div class="video-container">
                <div class="offline-badge" id="offline-badge">آفلاین</div>
                <video class="video-player" id="videoPlayer" controls poster="https://archive.org/download/afghan-flix-thumbnails/default-thumbnail.jpg">
                    <source src="https://archive.org/download/afghan-flix-001/pashtun_history_pt1.mp4" type="video/mp4">
                    ستاسو براؤزر ویډیو نه ملاتړوي.
                </video>
            </div>
            
            <!-- ویډیو کنټرولونه -->
            <div class="video-controls">
                <button class="control-btn" id="likeBtn">
                    <i class="far fa-heart"></i>
                    لایک
                </button>
                <button class="control-btn" id="saveBtn">
                    <i class="far fa-bookmark"></i>
                    خوندي
                </button>
                <button class="control-btn" id="downloadBtn">
                    <i class="fas fa-download"></i>
                    ډاونلوډ
                </button>
                <button class="control-btn" id="shareBtn">
                    <i class="fas fa-share-alt"></i>
                    شریکول
                </button>
            </div>
            
            <!-- ویډیو معلومات -->
            <div class="video-info">
                <div class="video-title" id="video-title">د پښتنو تاریخ - لومړی برخه</div>
                <div class="video-meta">
                    <span>1.2K لیدنې</span>
                    <span>2 ورځې وړاندې</span>
                </div>
                <div class="video-desc" id="video-desc">د پښتنو د تاریخ په اړه مستند فلم چې د پښتنو د تاریخي پېښو او شخصیتونو په اړه معلومات وړاندې کوي.</div>
            </div>
            
            <!-- کیفیت انتخاب -->
            <div class="quality-selector">
                <select id="qualitySelect">
                    <option value="auto">اتومات کیفیت</option>
                    <option value="1080">1080p (عالی)</option>
                    <option value="720">720p (ښه)</option>
                    <option value="480">480p (منځنی)</option>
                </select>
            </div>
            
            <!-- اړونده ویډیوګانې -->
            <div class="related-videos">
                <div class="section-title">
                    <span>اړونده ویډیوګانې</span>
                    <a href="#" style="color: var(--primary-color); font-size: 14px;">ټولې وګورئ</a>
                </div>
                
                <div class="video-item" onclick="loadVideo(1)">
                    <div class="video-thumb">
                        <img src="https://archive.org/download/afghan-flix-thumbnails/pashtun-history-pt2.jpg" alt="Video Thumbnail">
                        <span class="duration">10:25</span>
                    </div>
                    <div class="video-item-info">
                        <div class="video-item-title">د پښتنو تاریخ - دوهمه برخه</div>
                        <div class="video-item-meta">Afghan Flix • 5.2K لیدنې • 1 اونۍ وړاندې</div>
                    </div>
                </div>
                
                <div class="video-item" onclick="loadVideo(2)">
                    <div class="video-thumb">
                        <img src="https://archive.org/download/afghan-flix-thumbnails/pashtun-figures.jpg" alt="Video Thumbnail">
                        <span class="duration">15:40</span>
                    </div>
                    <div class="video-item-info">
                        <div class="video-item-title">پښتنو مشهور شخصیتونه</div>
                        <div class="video-item-meta">Afghan Flix • 8.7K لیدنې • 2 اونۍ وړاندې</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- اکتشاف پاڼه -->
        <div class="page" id="explore-page">
            <div class="related-videos" style="margin-top: 15px;">
                <div class="section-title">نوي ویډیوګانې</div>
                
                <div class="video-item" onclick="loadVideo(3)">
                    <div class="video-thumb">
                        <img src="https://archive.org/download/afghan-flix-thumbnails/afg-nature.jpg" alt="Video Thumbnail">
                        <span class="duration">12:30</span>
                    </div>
                    <div class="video-item-info">
                        <div class="video-item-title">د افغانستان طبیعي ښکلا</div>
                        <div class="video-item-meta">Nature AFG • 15K لیدنې • 3 ورځې وړاندې</div>
                    </div>
                </div>
                
                <div class="video-item" onclick="loadVideo(4)">
                    <div class="video-thumb">
                        <img src="https://archive.org/download/afghan-flix-thumbnails/kabul-historical.jpg" alt="Video Thumbnail">
                        <span class="duration">22:15</span>
                    </div>
                    <div class="video-item-info">
                        <div class="video-item-title">د کابل تاریخي ځایونه</div>
                        <div class="video-item-meta">Kabul History • 7.3K لیدنې • 5 ورځې وړاندې</div>
                    </div>
                </div>
            </div>
            
            <div class="related-videos" style="margin-top: 20px;">
                <div class="section-title">ترټولو ډیدلي ویډیوګانې</div>
                
                <div class="video-item" onclick="loadVideo(5)">
                    <div class="video-thumb">
                        <img src="https://archive.org/download/afghan-flix-thumbnails/afg-war-history.jpg" alt="Video Thumbnail">
                        <span class="duration">45:20</span>
                    </div>
                    <div class="video-item-info">
                        <div class="video-item-title">د افغانستان د جګړې تاریخ</div>
                        <div class="video-item-meta">AFG History • 150K لیدنې • 1 میاشت وړاندې</div>
                    </div>
                </div>
                
                <div class="video-item" onclick="loadVideo(6)">
                    <div class="video-thumb">
                        <img src="https://archive.org/download/afghan-flix-thumbnails/pashtun-tribal.jpg" alt="Video Thumbnail">
                        <span class="duration">32:10</span>
                    </div>
                    <div class="video-item-info">
                        <div class="video-item-title">د پښتنو قبایلي نظام</div>
                        <div class="video-item-meta">Tribal System • 98K لیدنې • 2 میاشتې وړاندې</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ډاونلوډ پاڼه -->
        <div class="page" id="downloads-page">
            <div class="related-videos" style="margin-top: 15px;">
                <div class="section-title">ستاسو ډاونلوډ شوي ویډیوګانې</div>
                
                <div class="video-item" onclick="playDownloaded(1)">
                    <div class="video-thumb">
                        <img src="https://archive.org/download/afghan-flix-thumbnails/pashtun-history-pt1.jpg" alt="Video Thumbnail">
                        <span class="duration">10:25</span>
                    </div>
                    <div class="video-item-info">
                        <div class="video-item-title">د پښتنو تاریخ - لومړی برخه</div>
                        <div class="video-item-meta">ډاونلوډ شوی • 250MB • 480p</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- اپلوډ پاڼه -->
        <div class="page" id="upload-page">
            <div class="upload-form">
                <h2 style="text-align: center; margin-bottom: 20px; color: var(--dark-color);">نوی ویډیو اپلوډ کړئ</h2>
                
                <div class="form-group">
                    <label for="video-title-input">د ویډیو عنوان</label>
                    <input type="text" id="video-title-input" placeholder="د ویډیو عنوان ولیکئ">
                </div>
                
                <div class="form-group">
                    <label for="video-desc-input">تفصیل</label>
                    <textarea id="video-desc-input" rows="3" placeholder="د ویډیو په اړه لنډ معلومات ولیکئ"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="video-category">کټګوري</label>
                    <select id="video-category">
                        <option value="documentary">مستند</option>
                        <option value="history">تاریخ</option>
                        <option value="culture">کلتور</option>
                        <option value="music">موسیقي</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="video-file">ویډیو فایل</label>
                    <input type="file" id="video-file" accept="video/*">
                </div>
                
                <div class="form-group">
                    <label for="video-thumbnail">د ویډیو تصویر</label>
                    <input type="file" id="video-thumbnail" accept="image/*">
                </div>
                
                <button class="upload-btn" onclick="uploadVideo()">
                    <i class="fas fa-upload"></i> اپلوډ کړئ
                </button>
            </div>
        </div>
        
        <!-- پروفایل پاڼه -->
        <div class="page" id="profile-page">
            <div class="video-info" style="margin-top: 15px; text-align: center;">
                <div style="width: 100px; height: 100px; border-radius: 50%; background-color: #eee; margin: 0 auto 15px; overflow: hidden;">
                    <img src="https://archive.org/download/afghan-flix-thumbnails/default-profile.jpg" alt="Profile" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="video-title" id="user-name">ستاسو نوم</div>
                <div class="video-desc">کارونکی</div>
            </div>
            
            <div class="related-videos">
                <div class="section-title">ستاسو تنظیمات</div>
                
                <div class="video-item" style="padding: 12px 15px;" onclick="showSettings()">
                    <div class="video-item-info">
                        <div class="video-item-title">اپلیکیشن تنظیمات</div>
                    </div>
                    <i class="fas fa-chevron-left" style="color: var(--text-light);"></i>
                </div>
                
                <div class="video-item" style="padding: 12px 15px;" onclick="showLanguage()">
                    <div class="video-item-info">
                        <div class="video-item-title">ژبه بدلول</div>
                    </div>
                    <i class="fas fa-chevron-left" style="color: var(--text-light);"></i>
                </div>
                
                <div class="video-item" style="padding: 12px 15px;" onclick="showStorage()">
                    <div class="video-item-info">
                        <div class="video-item-title">د ذخیرې مدیریت</div>
                    </div>
                    <i class="fas fa-chevron-left" style="color: var(--text-light);"></i>
                </div>
            </div>
            
            <div class="related-videos" style="margin-top: 20px;">
                <div class="section-title">نور اختیارات</div>
                
                <div class="video-item" style="padding: 12px 15px;" onclick="showHelp()">
                    <div class="video-item-info">
                        <div class="video-item-title">مرسته او پوښتنې</div>
                    </div>
                    <i class="fas fa-chevron-left" style="color: var(--text-light);"></i>
                </div>
                
                <div class="video-item" style="padding: 12px 15px; color: var(--danger-color);" onclick="logout()">
                    <div class="video-item-info">
                        <div class="video-item-title">وتل</div>
                    </div>
                    <i class="fas fa-chevron-left" style="color: var(--danger-color);"></i>
                </div>
            </div>
        </div>
        
        <!-- د ننوتلو پاڼه -->
        <div class="page" id="login-page">
            <div class="auth-form">
                <h2 class="auth-title">ننوتل</h2>
                
                <div class="form-group">
                    <label for="login-email">برېښنالیک</label>
                    <input type="email" id="login-email" placeholder="ستاسو برېښنالیک ولیکئ">
                </div>
                
                <div class="form-group">
                    <label for="login-password">پاسورډ</label>
                    <input type="password" id="login-password" placeholder="ستاسو پاسورډ ولیکئ">
                </div>
                
                <button class="auth-btn" onclick="login()">
                    <i class="fas fa-sign-in-alt"></i> ننوتل
                </button>
                
                <div class="auth-link" onclick="showPage('register-page')">
                    نوی حساب جوړول؟
                </div>
            </div>
        </div>
        
        <!-- د ثبتولو پاڼه -->
        <div class="page" id="register-page">
            <div class="auth-form">
                <h2 class="auth-title">نوی حساب جوړول</h2>
                
                <div class="form-group">
                    <label for="register-name">نوم</label>
                    <input type="text" id="register-name" placeholder="ستاسو نوم ولیکئ">
                </div>
                
                <div class="form-group">
                    <label for="register-email">برېښنالیک</label>
                    <input type="email" id="register-email" placeholder="ستاسو برېښنالیک ولیکئ">
                </div>
                
                <div class="form-group">
                    <label for="register-password">پاسورډ</label>
                    <input type="password" id="register-password" placeholder="پاسورډ ولیکئ">
                </div>
                
                <div class="form-group">
                    <label for="register-confirm">پاسورډ تایید کړئ</label>
                    <input type="password" id="register-confirm" placeholder="پاسورډ بیا ولیکئ">
                </div>
                
                <button class="auth-btn" onclick="register()">
                    <i class="fas fa-user-plus"></i> حساب جوړول
                </button>
                
                <div class="auth-link" onclick="showPage('login-page')">
                    دمخه حساب لرئ؟ ننوتل
                </div>
            </div>
        </div>
    </div>
    
    <!-- تب بار -->
    <div class="tab-bar">
        <a href="#" class="tab-btn active" onclick="showPage('home-page')">
            <i class="fas fa-home"></i>
            کور
        </a>
        <a href="#" class="tab-btn" onclick="showPage('explore-page')">
            <i class="fas fa-compass"></i>
            اکتشاف
        </a>
        <a href="#" class="tab-btn" onclick="showPage('downloads-page')">
            <i class="fas fa-download"></i>
            ډاونلوډونه
        </a>
        <a href="#" class="tab-btn" onclick="showPage('profile-page')">
            <i class="fas fa-user"></i>
            پروفایل
        </a>
    </div>
    
    <!-- لودر -->
    <div class="loader" id="loader">
        <div class="loader-content">
            <div style="margin-bottom: 15px;">
                <i class="fas fa-spinner fa-spin" style="font-size: 30px; color: var(--primary-color);"></i>
            </div>
            <span id="loader-text">ویډیو پلی کېږي...</span>
        </div>
    </div>
    
    <!-- د ویډیو ډیټابیس -->
    <script>
        // د archive.org سره د اتصال تنظیمات
        const archiveOrgConfig = {
            accessKey: "FW7x4cknX0iMBDN1",
            secretKey: "V3PWWvXdWlylUGa0",
            endpoint: "s3.us.archive.org",
            bucket: "afghan-flix-videos"
        };

        // د فایر بیز تنظیمات
        const firebaseConfig = {
            apiKey: "AIzaSyDzWtVoR3UXOYo6zBP21zWVflvQKIM3R04",
            authDomain: "afghan-flix.firebaseapp.com",
            projectId: "afghan-flix",
            storageBucket: "afghan-flix.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // د ویډیو ډیټابیس
        const videos = [
            {
                id: 1,
                title: "د پښتنو تاریخ - لومړی برخه",
                desc: "د پښتنو د تاریخ په اړه مستند فلم",
                url: "https://archive.org/download/afghan-flix-001/pashtun_history_pt1.mp4",
                thumbnail: "https://archive.org/download/afghan-flix-thumbnails/pashtun-history-pt1.jpg",
                views: "1.2K",
                date: "2 ورځې وړاندې",
                duration: "10:25",
                category: "history",
                downloaded: true,
                quality: "480p",
                size: "250MB"
            },
            {
                id: 2,
                title: "د پښتنو تاریخ - دوهمه برخه",
                desc: "د پښتنو د تاریخ دوهم برخه",
                url: "https://archive.org/download/afghan-flix-002/pashtun_history_pt2.mp4",
                thumbnail: "https://archive.org/download/afghan-flix-thumbnails/pashtun-history-pt2.jpg",
                views: "5.2K",
                date: "1 اونۍ وړاندې",
                duration: "15:40",
                category: "history",
                downloaded: false
            },
            {
                id: 3,
                title: "د افغانستان طبیعي ښکلا",
                desc: "د افغانستان د طبیعت ښکلا",
                url: "https://archive.org/download/afghan-flix-003/afg_nature.mp4",
                thumbnail: "https://archive.org/download/afghan-flix-thumbnails/afg-nature.jpg",
                views: "15K",
                date: "3 ورځې وړاندې",
                duration: "12:30",
                category: "documentary",
                downloaded: false
            },
            {
                id: 4,
                title: "د کابل تاریخي ځایونه",
                desc: "د کابل ښار تاریخي ځایونه",
                url: "https://archive.org/download/afghan-flix-004/kabul_historical.mp4",
                thumbnail: "https://archive.org/download/afghan-flix-thumbnails/kabul-historical.jpg",
                views: "7.3K",
                date: "5 ورځې وړاندې",
                duration: "22:15",
                category: "history",
                downloaded: false
            },
            {
                id: 5,
                title: "د افغانستان د جګړې تاریخ",
                desc: "د افغانستان په اړه د جګړو تاریخ",
                url: "https://archive.org/download/afghan-flix-005/afg_war_history.mp4",
                thumbnail: "https://archive.org/download/afghan-flix-thumbnails/afg-war-history.jpg",
                views: "150K",
                date: "1 میاشت وړاندې",
                duration: "45:20",
                category: "history",
                downloaded: false
            },
            {
                id: 6,
                title: "د پښتنو قبایلي نظام",
                desc: "د پښتنو د قبایلي نظام په اړه معلومات",
                url: "https://archive.org/download/afghan-flix-006/pashtun_tribal.mp4",
                thumbnail: "https://archive.org/download/afghan-flix-thumbnails/pashtun-tribal.jpg",
                views: "98K",
                date: "2 میاشتې وړاندې",
                duration: "32:10",
                category: "culture",
                downloaded: false
            }
        ];
        
        // د اپلیکیشن حالت
        let currentVideoId = 1;
        let isOnline = navigator.onLine;
        let likedVideos = [1];
        let savedVideos = [1];
        let currentUser = null;
        
        // د پاڼو مدیریت
        function showPage(pageId) {
            // که چیرې کارونکی نه وي ننوتلی، پروفایل او اپلوډ پاڼې ته د تګ مخه ونیسئ
            if ((pageId === 'profile-page' || pageId === 'upload-page') && !currentUser) {
                showPage('login-page');
                return;
            }
            
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // تب بار تڼۍ یوازې د اصلي پاڼو لپاره فعاله کړئ
            if (['home-page', 'explore-page', 'downloads-page', 'profile-page'].includes(pageId)) {
                document.querySelector(`.tab-btn[onclick="showPage('${pageId}')"]`).classList.add('active');
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        // ویډیو پلی کول
        function loadVideo(videoId) {
            const video = videos.find(v => v.id === videoId);
            if (!video) return;
            
            currentVideoId = videoId;
            
            // Show loader
            document.getElementById('loader').style.display = 'flex';
            document.getElementById('loader-text').textContent = "ویډیو پلی کېږي...";
            
            // Update UI after short delay to simulate loading
            setTimeout(() => {
                document.getElementById('video-title').textContent = video.title;
                document.getElementById('video-desc').textContent = video.desc;
                
                const videoPlayer = document.getElementById('videoPlayer');
                if (isOnline) {
                    videoPlayer.src = video.url;
                    videoPlayer.poster = video.thumbnail;
                    document.getElementById('offline-badge').style.display = 'none';
                } else if (video.downloaded) {
                    videoPlayer.src = video.offlineUrl || video.url;
                    document.getElementById('offline-badge').style.display = 'block';
                } else {
                    alert('تاسو آفلاین یاست او دا ویډیو ستاسو په ډیوایس کې نه دی ذخیره شوی!');
                    document.getElementById('loader').style.display = 'none';
                    return;
                }
                
                // Update like and save buttons
                updateLikeButton();
                updateSaveButton();
                updateDownloadButton();
                
                videoPlayer.load();
                videoPlayer.play();
                
                // Hide loader
                document.getElementById('loader').style.display = 'none';
                
                // Scroll to top
                window.scrollTo(0, 0);
                
                // کور پاڼه ښکاره کړئ
                showPage('home-page');
            }, 500);
        }
        
        // ډاونلوډ شوي ویډیوګانې پلی کول
        function playDownloaded(videoId) {
            const video = videos.find(v => v.id === videoId);
            if (!video || !video.downloaded) return;
            
            showPage('home-page');
            loadVideo(videoId);
        }
        
        // د لایک تڼۍ تازه کول
        function updateLikeButton() {
            const likeBtn = document.getElementById('likeBtn');
            const isLiked = likedVideos.includes(currentVideoId);
            
            likeBtn.innerHTML = isLiked 
                ? '<i class="fas fa-heart" style="color:red"></i> لایک شوی' 
                : '<i class="far fa-heart"></i> لایک';
        }
        
        // د خوندي تڼۍ تازه کول
        function updateSaveButton() {
            const saveBtn = document.getElementById('saveBtn');
            const isSaved = savedVideos.includes(currentVideoId);
            
            saveBtn.innerHTML = isSaved 
                ? '<i class="fas fa-bookmark" style="color:var(--primary-color)"></i> خوندي شوی' 
                : '<i class="far fa-bookmark"></i> خوندي';
        }
        
        // د ډاونلوډ تڼۍ تازه کول
        function updateDownloadButton() {
            const downloadBtn = document.getElementById('downloadBtn');
            const video = videos.find(v => v.id === currentVideoId);
            
            if (video.downloaded) {
                downloadBtn.innerHTML = '<i class="fas fa-check-circle"></i> ډاونلوډ شوی';
                downloadBtn.disabled = true;
            } else {
                downloadBtn.innerHTML = '<i class="fas fa-download"></i> ډاونلوډ';
                downloadBtn.disabled = false;
            }
        }
        
        // د لایک تڼۍ فعالیت
        document.getElementById('likeBtn').addEventListener('click', function() {
            if (!currentUser) {
                showPage('login-page');
                return;
            }
            
            const index = likedVideos.indexOf(currentVideoId);
            if (index === -1) {
                likedVideos.push(currentVideoId);
            } else {
                likedVideos.splice(index, 1);
            }
            updateLikeButton();
        });
        
        // د خوندي تڼۍ فعالیت
        document.getElementById('saveBtn').addEventListener('click', function() {
            if (!currentUser) {
                showPage('login-page');
                return;
            }
            
            const index = savedVideos.indexOf(currentVideoId);
            if (index === -1) {
                savedVideos.push(currentVideoId);
            } else {
                savedVideos.splice(index, 1);
            }
            updateSaveButton();
        });
        
        // د ډاونلوډ تڼۍ فعالیت
        document.getElementById('downloadBtn').addEventListener('click', function() {
            if (!currentUser) {
                showPage('login-page');
                return;
            }
            
            if (!isOnline) {
                alert('تاسو اوس آفلاین یاست! د ویډیو ډاونلوډ لپاره آنلاین شی.');
                return;
            }
            
            const video = videos.find(v => v.id === currentVideoId);
            if (!video) return;
            
            // Show loader
            document.getElementById('loader').style.display = 'flex';
            document.getElementById('loader-text').textContent = "ویډیو ډاونلوډیږي...";
            
            // Simulate download
            setTimeout(() => {
                video.downloaded = true;
                video.offlineUrl = video.url; // په حقیقت کې به دا د localStorage یا IndexDB څخه وی
                updateDownloadButton();
                alert(`ویډیو په بریالیتوب سره ډاونلوډ شو! (${video.size || '250MB'})`);
                document.getElementById('loader').style.display = 'none';
                
                // Refresh downloads page if active
                if (document.getElementById('downloads-page').classList.contains('active')) {
                    showPage('downloads-page');
                }
            }, 1500);
        });
        
        // د شریکولو تڼۍ فعالیت
        document.getElementById('shareBtn').addEventListener('click', function() {
            const video = videos.find(v => v.id === currentVideoId);
            if (!video) return;
            
            alert(`د "${video.title}" ویډیو لینک په کلیپ بورډ کې کاپي شو!\n\n${video.url}`);
        });
        
        // د کیفیت انتخاب فعالیت
        document.getElementById('qualitySelect').addEventListener('change', function() {
            alert(`کیفیت ${this.value} ته بدل شو!`);
        });
        
        // د ویډیو اپلوډ فعالیت
        async function uploadVideo() {
            const title = document.getElementById('video-title-input').value;
            const desc = document.getElementById('video-desc-input').value;
            const category = document.getElementById('video-category').value;
            const videoFile = document.getElementById('video-file').files[0];
            const thumbnailFile = document.getElementById('video-thumbnail').files[0];
            
            if (!title || !desc || !videoFile) {
                alert('مهرباني وکړئ ټول اړین معلومات ولیکئ او ویډیو فایل وټاکئ!');
                return;
            }
            
            // Show loader
            document.getElementById('loader').style.display = 'flex';
            document.getElementById('loader-text').textContent = "ویډیو اپلوډیږي...";
            
            try {
                // دلته به د archive.org S3 API کاروو
                // const uploadResult = await uploadToArchiveOrg(videoFile, thumbnailFile, title, desc, category);
                
                setTimeout(() => {
                    // د نوي ویډیو اضافه کول
                    const newVideo = {
                        id: videos.length + 1,
                        title: title,
                        desc: desc,
                        url: `https://archive.org/download/afghan-flix-${videos.length + 1}/${videoFile.name}`,
                        thumbnail: thumbnailFile ? `https://archive.org/download/afghan-flix-thumbnails/${thumbnailFile.name}` : 'https://archive.org/download/afghan-flix-thumbnails/default-thumbnail.jpg',
                        views: "0",
                        date: "اوس مهال",
                        duration: "00:00",
                        category: category
                    };
                    
                    videos.push(newVideo);
                    
                    // فورم پاکول
                    document.getElementById('video-title-input').value = '';
                    document.getElementById('video-desc-input').value = '';
                    document.getElementById('video-file').value = '';
                    document.getElementById('video-thumbnail').value = '';
                    
                    document.getElementById('loader').style.display = 'none';
                    alert("ستاسو ویډیو په بریالیتوب سره اپلوډ شو!");
                    
                    // اکتشاف پاڼې ته ولاړشئ
                    showPage('explore-page');
                }, 3000);
            } catch (error) {
                document.getElementById('loader').style.display = 'none';
                alert("د اپلوډ پر مهال ستونزه رامنځته شوه: " + error.message);
            }
        }
        
        // د ننوتلو فعالیت
        async function login() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (!email || !password) {
                alert('مهرباني وکړئ برېښنالیک او پاسورډ ولیکئ!');
                return;
            }
            
            // Show loader
            document.getElementById('loader').style.display = 'flex';
            document.getElementById('loader-text').textContent = "ننوتل کېږي...";
            
            try {
                // دلته به د فایر بیز auth کاروو
                // const userCredential = await firebase.auth().signInWithEmailAndPassword(email, password);
                
                setTimeout(() => {
                    // د مثال لپاره:
                    currentUser = {
                        email: email,
                        name: email.split('@')[0]
                    };
                    
                    document.getElementById('user-name').textContent = currentUser.name;
                    
                    document.getElementById('login-email').value = '';
                    document.getElementById('login-password').value = '';
                    
                    document.getElementById('loader').style.display = 'none';
                    alert("په بریالیتوب سره ننوتل!");
                    
                    // پروفایل پاڼې ته ولاړشئ
                    showPage('profile-page');
                }, 1500);
            } catch (error) {
                document.getElementById('loader').style.display = 'none';
                alert("د ننوتلو پر مهال ستونزه: " + error.message);
            }
        }
        
        // د ثبتولو فعالیت
        async function register() {
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;
            
            if (!name || !email || !password || !confirm) {
                alert('مهرباني وکړئ ټول اړین معلومات ولیکئ!');
                return;
            }
            
            if (password !== confirm) {
                alert('پاسورډونه مطابقت نلري!');
                return;
            }
            
            // Show loader
            document.getElementById('loader').style.display = 'flex';
            document.getElementById('loader-text').textContent = "حاسبه جوړیږي...";
            
            try {
                // دلته به د فایر بیز auth کاروو
                // const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
                
                setTimeout(() => {
                    // د مثال لپاره:
                    currentUser = {
                        email: email,
                        name: name
                    };
                    
                    document.getElementById('user-name').textContent = currentUser.name;
                    
                    document.getElementById('register-name').value = '';
                    document.getElementById('register-email').value = '';
                    document.getElementById('register-password').value = '';
                    document.getElementById('register-confirm').value = '';
                    
                    document.getElementById('loader').style.display = 'none';
                    alert("ستاسو حساب په بریالیتوب سره جوړ شو!");
                    
                    // پروفایل پاڼې ته ولاړشئ
                    showPage('profile-page');
                }, 1500);
            } catch (error) {
                document.getElementById('loader').style.display = 'none';
                alert("د ثبتولو پر مهال ستونزه: " + error.message);
            }
        }
        
        // د وتلو فعالیت
        function logout() {
            if (confirm('آیا تاسو ډاډه یاست چې غواړئ له اپلیکیشن څخه ووځئ؟')) {
                currentUser = null;
                alert('ستاسو له اپلیکیشن څخه وتل.');
                showPage('home-page');
            }
        }
        
        // د آنلاین/آفلاین حالت تشخیص
        function updateConnectionStatus() {
            isOnline = navigator.onLine;
            const statusElement = document.getElementById('offline-badge');
            
            if (!isOnline) {
                statusElement.style.display = 'block';
                
                // Check if current video is downloaded
                const video = videos.find(v => v.id === currentVideoId);
                if (video && !video.downloaded) {
                    // Try to find first downloaded video
                    const downloadedVideo = videos.find(v => v.downloaded);
                    if (downloadedVideo) {
                        loadVideo(downloadedVideo.id);
                    }
                }
            } else {
                statusElement.style.display = 'none';
            }
        }
        
        // د تنظیماتو فعالیتونه
        function showSettings() {
            alert('د اپلیکیشن تنظیمات به ژر تر ژره اضافه شي!');
        }
        
        function showLanguage() {
            alert('اوس مهال یوازې پښتو ژبه ملاتړیږي!');
        }
        
        function showStorage() {
            const downloadedCount = videos.filter(v => v.downloaded).length;
            alert(`تاسو ${downloadedCount} ویډیوګانې ډاونلوډ کړي دي. د ټولې ذخیرې اندازه: ${downloadedCount * 250}MB`);
        }
        
        function showHelp() {
            alert('د مرستې لپاره زموږ سره په afghanflix@example.com برېښنالیک وکړئ!');
        }
        
        function showSearch() {
            alert('د پلټنې سیستم به ژر تر ژره اضافه شي!');
        }
        
        // Initialize
        window.addEventListener('DOMContentLoaded', function() {
            updateConnectionStatus();
            updateLikeButton();
            updateSaveButton();
            updateDownloadButton();
            
            // د فایر بیز پیلول
            firebase.initializeApp(firebaseConfig);
        });
        
        window.addEventListener('online', updateConnectionStatus);
        window.addEventListener('offline', updateConnectionStatus);
    </script>
    
    <!-- د فایر بیز SDK لینکونه -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js"></script>
</body>
</html>
